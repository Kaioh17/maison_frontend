import{t as z,u as w,_ as T,y as E}from"./index-DaAC2zqA.js";import{r,j as e,a1 as L,a2 as N,a3 as R,a4 as _,$ as D}from"./react-vendor-JE9gdlBQ.js";import{b as A,L as P}from"./router-DL0rZlEF.js";import{u as M}from"./useFavicon-Bc8ZFvv0.js";import"./utils-2shQNo7D.js";import"./vendor-C1Py2TwH.js";function Q(){M();const[c,j]=r.useState(!1),[o,k]=r.useState({email:"",password:""}),[m,x]=r.useState(!1),[y,b]=r.useState(""),[l,S]=r.useState(null),[u,F]=r.useState("dark"),p=r.useRef(null),{tenantInfo:i,isLoading:W}=z(),g=A(),{isAuthenticated:f,role:h}=w(),C=()=>{if(typeof window>"u")return"dark";const t=document.documentElement.getAttribute("data-theme")||document.body.getAttribute("data-theme");return t==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":t||"dark"};r.useEffect(()=>{const t=()=>{const s=C();F(s)};t();const a=new MutationObserver(t);a.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),a.observe(document.body,{attributes:!0,attributeFilter:["data-theme"]});const n=window.matchMedia("(prefers-color-scheme: dark)");return n.addEventListener("change",t),()=>{a.disconnect(),n.removeEventListener("change",t)}},[]),r.useEffect(()=>{const t=new IntersectionObserver(a=>{a.forEach(n=>{n.isIntersecting&&!l&&(T(()=>import("./nikita-pishchugin-IdyI9y8BfB4-unsplash-CabSUqcr.js"),[]).then(s=>{S(s.default)}),t.disconnect())})},{rootMargin:"50px"});return p.current&&t.observe(p.current),()=>{t.disconnect()}},[l]),r.useEffect(()=>{f&&h==="rider"&&g("/rider/dashboard",{replace:!0})},[f,h,g]);const v=t=>k({...o,[t.target.name]:t.target.value}),I=async t=>{var a,n;t.preventDefault();try{x(!0),b("");const s=await E(o.email,o.password);w.getState().login({token:s.access_token}),g("/rider/dashboard",{replace:!0})}catch(s){b(((n=(a=s.response)==null?void 0:a.data)==null?void 0:n.detail)||"Login failed. Please check your credentials.")}finally{x(!1)}};if(f&&h==="rider")return null;if(W)return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"var(--bw-bg)"},children:e.jsx("div",{style:{color:"var(--bw-text)",fontFamily:"Work Sans, sans-serif",fontSize:"16px"},children:"Loading..."})});const d=(i==null?void 0:i.company_name)||"Our Service";return e.jsxs("main",{className:"bw","aria-label":"Rider Login",style:{margin:0,padding:0,height:"100vh",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",height:"100vh",width:"100%"},children:[e.jsxs("div",{ref:p,className:"rider-login-image-container",style:{width:"60%",height:"100%",position:"relative",backgroundImage:l?`url(${l})`:"none",backgroundColor:l?"transparent":"#f3f4f6",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",transition:"background-image 0.3s ease",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"48px",paddingTop:"120px"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:1}}),e.jsx("div",{style:{color:"white",textAlign:"center",maxWidth:"600px",zIndex:2,position:"relative",padding:"32px"},children:e.jsxs("p",{style:{fontFamily:"Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:"20px",lineHeight:"1.6",fontWeight:300,textShadow:"0 2px 8px rgba(0, 0, 0, 0.5)",margin:0},children:["Welcome back to ",d,". Sign in to continue booking rides and managing your account."]})})]}),e.jsx("div",{role:"form","aria-labelledby":"login-title",className:"rider-login-form-container",style:{width:"40%",height:"100%",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",backgroundColor:"var(--bw-bg)",overflowY:"auto"},children:e.jsxs("div",{style:{width:"100%",maxWidth:"100%"},children:[i&&e.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center",alignItems:"center"},children:i.logo_url?e.jsx("img",{src:i.logo_url,alt:d,style:{maxHeight:"60px",maxWidth:"200px",objectFit:"contain"}}):e.jsx("h1",{style:{margin:0,fontSize:"32px",fontWeight:600,color:"var(--bw-text)",fontFamily:"DM Sans, sans-serif"},children:d})}),e.jsx("h2",{id:"login-title",style:{margin:0,fontSize:40,fontFamily:"DM Sans, sans-serif",fontWeight:200},children:"Sign in"}),e.jsx("p",{className:"small-muted",style:{marginTop:6,fontSize:16,fontFamily:"Work Sans, sans-serif",fontWeight:300},children:i?`Sign in to ${d}`:"Sign in to your account"}),y&&e.jsx("div",{style:{marginTop:16,padding:"12px",backgroundColor:"rgba(197, 72, 61, 0.1)",border:"1px solid var(--bw-error)",borderRadius:"4px",color:"var(--bw-error)",fontSize:"14px",fontFamily:"Work Sans, sans-serif",width:"100%"},children:y}),e.jsxs("form",{onSubmit:I,style:{marginTop:16,width:"100%"},children:[e.jsx("label",{className:"small-muted",htmlFor:"email",style:{fontFamily:"Work Sans, sans-serif"},children:"Email"}),e.jsxs("div",{style:{position:"relative",marginTop:6,marginBottom:12},children:[e.jsx(L,{size:16,"aria-hidden":!0,style:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",opacity:.7,color:u==="dark"?"#ffffff":void 0}}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"bw-input",style:{padding:"16px 18px 16px 44px",borderRadius:0,fontFamily:"Work Sans, sans-serif"},placeholder:"you@email.com",value:o.email,onChange:v})]}),e.jsx("label",{className:"small-muted",htmlFor:"password",style:{fontFamily:"Work Sans, sans-serif"},children:"Password"}),e.jsxs("div",{style:{position:"relative",marginTop:6},children:[e.jsx(N,{size:16,"aria-hidden":!0,style:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",opacity:.7,color:u==="dark"?"#ffffff":void 0}}),e.jsx("input",{id:"password",name:"password",type:c?"text":"password",required:!0,className:"bw-input",style:{padding:"16px 18px 16px 44px",borderRadius:0,fontFamily:"Work Sans, sans-serif"},placeholder:"••••••••",value:o.password,onChange:v}),e.jsx("button",{type:"button","aria-label":"Toggle password",onClick:()=>j(!c),style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",background:"transparent",border:0,color:u==="dark"?"#ffffff":"#4c4e4eff",cursor:"pointer"},children:c?e.jsx(R,{size:16}):e.jsx(_,{size:16})})]}),e.jsxs("button",{className:"bw-btn",style:{width:"100%",marginTop:16,borderRadius:0,padding:"14px 24px",fontFamily:"Work Sans, sans-serif",fontWeight:500},disabled:m,type:"submit",children:[e.jsx("span",{children:m?"Signing in...":"Sign in"}),!m&&e.jsx(D,{size:16,"aria-hidden":!0})]}),e.jsxs("div",{style:{marginTop:24,width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:16,gap:12},children:[e.jsx("div",{style:{flex:1,height:"1px",backgroundColor:"var(--bw-border)"}}),e.jsx("span",{className:"small-muted",style:{fontSize:"12px",fontFamily:"Work Sans, sans-serif"},children:"or"}),e.jsx("div",{style:{flex:1,height:"1px",backgroundColor:"var(--bw-border)"}})]}),e.jsxs("p",{className:"small-muted",style:{textAlign:"center",marginBottom:16,fontSize:"14px",fontFamily:"Work Sans, sans-serif"},children:["Don't have an account?"," ",e.jsx(P,{to:"/riders/register",style:{color:"var(--bw-fg)",textDecoration:"underline"},children:"signup"})]})]})]})]})})]}),e.jsx("style",{children:`
        @media (max-width: 768px) {
          .rider-login-image-container {
            display: none !important;
          }
          .rider-login-form-container {
            width: 100% !important;
          }
        }
      `})]})}export{Q as default};
