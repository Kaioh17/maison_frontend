import{r as s,j as e,ao as E,X as B,an as L,ap as A,i as P}from"./react-vendor-JE9gdlBQ.js";import{f as _,x as M}from"./index-DaAC2zqA.js";import{b as C,c as T}from"./vehicles-CkZMpXtf.js";import{U}from"./UpgradePlanButton-C63cPaCY.js";import{u as X,S as $}from"./SettingsMenuBar-Cp_MNEJw.js";import{b as H}from"./router-DL0rZlEF.js";import"./vendor-C1Py2TwH.js";import"./utils-2shQNo7D.js";function ae(){var y,u;const[i,W]=s.useState(null),[f,c]=s.useState([]),[k,N]=s.useState(!0),[t,F]=s.useState(window.innerWidth<=768),{isOpen:h}=X(),[o,d]=s.useState(!1),[n,x]=s.useState(null),[m,w]=s.useState(!1),z=H(),[l,p]=s.useState({vehicle_category:"",vehicle_flat_rate:0});s.useEffect(()=>{const a=()=>{F(window.innerWidth<=768)};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),s.useEffect(()=>{(async()=>{try{const[r,v]=await Promise.all([_(),_().then(async S=>{var j;return(j=S.data)!=null&&j.id?(await C(S.data.id)).data||[]:[]})]);W(r.data),c(v)}catch(r){console.error("Failed to load data:",r)}finally{N(!1)}})()},[]);const g=(a,r)=>{p(v=>({...v,[a]:r}))},R=()=>{p({vehicle_category:"",vehicle_flat_rate:0}),d(!0),x(null)},I=a=>{p({vehicle_category:a.vehicle_category,vehicle_flat_rate:a.vehicle_flat_rate}),x(a.id),d(!1)},b=()=>{p({vehicle_category:"",vehicle_flat_rate:0}),d(!1),x(null)},V=async()=>{if(!l.vehicle_category||l.vehicle_flat_rate<=0){alert("Please fill in all fields with valid values");return}try{if(w(!0),n)await M.patch(`/v1/vehicles/category/${n}`,{vehicle_category:l.vehicle_category,vehicle_flat_rate:l.vehicle_flat_rate});else{const a=await T({vehicle_category:l.vehicle_category,vehicle_flat_rate:l.vehicle_flat_rate,seating_capacity:4});a.data&&c(r=>[...r,a.data])}if(i!=null&&i.id){const a=await C(i.id);c(a.data||[])}b(),alert(n?"Vehicle category updated successfully!":"Vehicle category created successfully!")}catch(a){console.error("Failed to save:",a),alert("Failed to save vehicle category. Please try again.")}finally{w(!1)}};if(k)return e.jsx("div",{className:"bw bw-container",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",padding:"clamp(16px, 3vw, 24px) 0"},children:e.jsx("div",{className:"bw-loading",style:{fontSize:"clamp(14px, 2vw, 16px)",fontFamily:'"Work Sans", sans-serif',color:"var(--bw-muted)"},children:"Loading..."})});const D=((u=(y=i==null?void 0:i.profile)==null?void 0:y.subscription_plan)==null?void 0:u.toLowerCase())||"free";return e.jsxs("div",{className:"bw",style:{display:"flex",minHeight:"100vh"},children:[e.jsx($,{}),e.jsxs("div",{style:{marginLeft:t?"0":h?"20%":"64px",transition:"margin-left 0.3s ease",width:t?"100%":h?"calc(100% - 20%)":"calc(100% - 64px)",maxWidth:"100%",overflowX:"hidden",boxSizing:"border-box"},children:[e.jsx("div",{style:{width:"100%",maxWidth:"100%",padding:"clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px)",marginBottom:"clamp(24px, 4vw, 32px)",boxSizing:"border-box"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:t?"wrap":"nowrap",gap:"clamp(12px, 2vw, 16px)"},children:[e.jsx("h1",{style:{fontSize:"clamp(24px, 4vw, 32px)",margin:0,fontFamily:'"DM Sans", sans-serif',fontWeight:200,color:"var(--bw-text)"},children:"Vehicle Configuration"}),!o&&!n&&e.jsxs("button",{className:"bw-btn bw-btn-action",onClick:R,style:{padding:t?"clamp(14px, 2.5vw, 18px) clamp(20px, 4vw, 24px)":"14px 24px",fontSize:t?"clamp(14px, 2vw, 16px)":"14px",fontFamily:'"Work Sans", sans-serif',fontWeight:600,display:"flex",alignItems:"center",gap:t?"clamp(8px, 1.5vw, 10px)":"8px",borderRadius:7,backgroundColor:"var(--bw-accent)",color:"#ffffff",border:"none",transition:"all 0.2s ease"},children:[e.jsx(E,{className:"w-4 h-4",style:{width:t?"clamp(18px, 2.5vw, 20px)":"18px",height:t?"clamp(18px, 2.5vw, 20px)":"18px"}}),e.jsx("span",{children:"Add Category"})]})]})}),e.jsxs("div",{className:"bw-container",style:{padding:"0 clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px)",maxWidth:"100%",overflowX:"hidden",boxSizing:"border-box"},children:[(o||n)&&e.jsxs("div",{className:"bw-card",style:{backgroundColor:"var(--bw-bg-secondary)",border:"1px solid var(--bw-border)",borderRadius:"clamp(8px, 1.5vw, 12px)",padding:"clamp(16px, 2.5vw, 24px)",marginBottom:"clamp(16px, 3vw, 24px)"},children:[e.jsx("h3",{style:{margin:"0 0 clamp(16px, 2.5vw, 24px) 0",fontSize:"clamp(16px, 2.5vw, 20px)",fontFamily:'"Work Sans", sans-serif',fontWeight:400,color:"var(--bw-text)"},children:n?"Edit Vehicle Category":"Add Vehicle Category"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:t?"1fr":"repeat(2, minmax(0, 1fr))",gap:"clamp(16px, 2vw, 24px)",width:"100%",maxWidth:"100%"},children:[e.jsxs("div",{className:"bw-form-group",children:[e.jsx("label",{className:"bw-form-label small-muted",style:{fontSize:"clamp(11px, 1.3vw, 13px)",fontFamily:'"Work Sans", sans-serif',fontWeight:300,color:"var(--bw-muted)",marginBottom:"clamp(4px, 0.8vw, 6px)"},children:"Vehicle Category"}),e.jsx("input",{type:"text",value:l.vehicle_category,onChange:a=>g("vehicle_category",a.target.value),className:"bw-input",placeholder:"e.g., Sedan, SUV, Luxury",style:{width:"100%",padding:"clamp(12px, 2vw, 16px) clamp(14px, 2.5vw, 18px)",fontSize:"clamp(12px, 1.5vw, 14px)",fontFamily:'"Work Sans", sans-serif',borderRadius:0,color:"var(--bw-text)",backgroundColor:"var(--bw-bg)",border:"1px solid var(--bw-border)"}})]}),e.jsxs("div",{className:"bw-form-group",children:[e.jsx("label",{className:"bw-form-label small-muted",style:{fontSize:"clamp(11px, 1.3vw, 13px)",fontFamily:'"Work Sans", sans-serif',fontWeight:300,color:"var(--bw-muted)",marginBottom:"clamp(4px, 0.8vw, 6px)"},children:"Flat Rate ($)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:l.vehicle_flat_rate,onChange:a=>g("vehicle_flat_rate",parseFloat(a.target.value)||0),className:"bw-input",placeholder:"0.00",style:{width:"100%",padding:"clamp(12px, 2vw, 16px) clamp(14px, 2.5vw, 18px)",fontSize:"clamp(12px, 1.5vw, 14px)",fontFamily:'"Work Sans", sans-serif',borderRadius:0,color:"var(--bw-text)",backgroundColor:"var(--bw-bg)",border:"1px solid var(--bw-border)"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"clamp(8px, 1.5vw, 12px)",marginTop:"clamp(16px, 2.5vw, 24px)",flexWrap:"wrap"},children:[e.jsxs("button",{className:"bw-btn-outline",onClick:b,disabled:m,style:{padding:t?"clamp(14px, 2.5vw, 18px) clamp(20px, 4vw, 24px)":"14px 24px",fontSize:t?"clamp(14px, 2vw, 16px)":"14px",fontFamily:'"Work Sans", sans-serif',fontWeight:600,borderRadius:7},children:[e.jsx(B,{className:"w-4 h-4",style:{width:"18px",height:"18px",marginRight:"8px"}}),"Cancel"]}),e.jsxs("button",{className:"bw-btn bw-btn-action",onClick:V,disabled:m,style:{padding:t?"clamp(14px, 2.5vw, 18px) clamp(20px, 4vw, 24px)":"14px 24px",fontSize:t?"clamp(14px, 2vw, 16px)":"14px",fontFamily:'"Work Sans", sans-serif',fontWeight:600,borderRadius:7},children:[e.jsx(L,{className:"w-4 h-4",style:{width:"18px",height:"18px",marginRight:"8px"}}),m?"Saving...":"Save"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:t?"1fr":"repeat(2, minmax(0, 1fr))",gap:"clamp(16px, 2vw, 24px)",width:"100%",maxWidth:"100%"},children:[f.map(a=>e.jsxs("div",{className:"bw-card",style:{backgroundColor:"var(--bw-bg-secondary)",border:"1px solid var(--bw-border)",borderRadius:"clamp(8px, 1.5vw, 12px)",padding:"clamp(16px, 2.5vw, 24px)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"clamp(12px, 2vw, 16px)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"clamp(8px, 1.5vw, 12px)"},children:[e.jsx(A,{className:"w-5 h-5",style:{color:"var(--bw-text)"}}),e.jsx("h3",{style:{margin:0,fontSize:"clamp(16px, 2.5vw, 20px)",fontFamily:'"Work Sans", sans-serif',fontWeight:400,color:"var(--bw-text)"},children:a.vehicle_category})]}),e.jsx("button",{className:"bw-btn-outline",onClick:()=>I(a),disabled:n!==null||o,style:{padding:"8px 12px",fontSize:"12px",fontFamily:'"Work Sans", sans-serif',fontWeight:600,borderRadius:7},children:e.jsx(P,{className:"w-4 h-4",style:{width:"16px",height:"16px"}})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"clamp(8px, 1.5vw, 12px)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:"clamp(12px, 1.5vw, 14px)",fontWeight:300,color:"var(--bw-muted)",fontFamily:'"Work Sans", sans-serif'},children:"Flat Rate:"}),e.jsxs("span",{style:{fontSize:"clamp(12px, 1.5vw, 14px)",fontWeight:300,fontFamily:'"Work Sans", sans-serif',color:"var(--bw-text)"},children:["$",a.vehicle_flat_rate]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"clamp(11px, 1.3vw, 12px)",color:"var(--bw-muted)",fontFamily:'"Work Sans", sans-serif'},children:e.jsxs("span",{children:["Created: ",new Date(a.created_on).toLocaleDateString()]})})]})]},a.id)),f.length===0&&!o&&e.jsx("div",{className:"bw-card",style:{backgroundColor:"var(--bw-bg-secondary)",border:"1px solid var(--bw-border)",borderRadius:"clamp(8px, 1.5vw, 12px)",padding:"clamp(16px, 2.5vw, 24px)",textAlign:"center",gridColumn:"span 2"},children:e.jsx("p",{style:{color:"var(--bw-muted)",fontFamily:'"Work Sans", sans-serif'},children:'No vehicle categories found. Click "Add Category" to create one.'})})]})]}),e.jsx(U,{currentPlan:D,onUpgradeClick:()=>z("/tenant/settings/plans"),isMobile:t})]})]})}export{ae as default};
