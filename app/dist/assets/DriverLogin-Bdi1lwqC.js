import{t as E,u as y,_ as T,v as L}from"./index-DaAC2zqA.js";import{r,j as e,a1 as N,a2 as D,a3 as _,a4 as P,$ as R}from"./react-vendor-JE9gdlBQ.js";import{b as A,d as M,L as $}from"./router-DL0rZlEF.js";import{u as B}from"./useFavicon-Bc8ZFvv0.js";import"./utils-2shQNo7D.js";import"./vendor-C1Py2TwH.js";function Q(){B();const[m,j]=r.useState(!1),[o,k]=r.useState({email:"",password:""}),[u,b]=r.useState(!1),[v,w]=r.useState(""),[l,F]=r.useState(null),[g,W]=r.useState("dark"),f=r.useRef(null),{tenantInfo:s,isLoading:C}=E(),p=A(),{isAuthenticated:h,role:d}=y(),[x]=M();r.useEffect(()=>{const t=x.get("token");if(t&&d!=="driver"){y.getState().login({token:t});const a=new URLSearchParams(x);a.delete("token");const n=window.location.pathname+(a.toString()?`?${a.toString()}`:"");window.history.replaceState({},"",n)}},[x,d]);const I=()=>{if(typeof window>"u")return"dark";const t=document.documentElement.getAttribute("data-theme")||document.body.getAttribute("data-theme");return t==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":t||"dark"};r.useEffect(()=>{const t=()=>{const i=I();W(i)};t();const a=new MutationObserver(t);a.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),a.observe(document.body,{attributes:!0,attributeFilter:["data-theme"]});const n=window.matchMedia("(prefers-color-scheme: dark)");return n.addEventListener("change",t),()=>{a.disconnect(),n.removeEventListener("change",t)}},[]),r.useEffect(()=>{const t=new IntersectionObserver(a=>{a.forEach(n=>{n.isIntersecting&&!l&&(T(()=>import("./nikita-pishchugin-IdyI9y8BfB4-unsplash-CabSUqcr.js"),[]).then(i=>{F(i.default)}).catch(i=>{console.warn("Failed to load background image:",i)}),t.disconnect())})},{rootMargin:"50px"});return f.current&&t.observe(f.current),()=>{t.disconnect()}},[l]),r.useEffect(()=>{h&&d==="driver"&&p("/driver/dashboard",{replace:!0})},[h,d,p]);const S=t=>k({...o,[t.target.name]:t.target.value}),z=async t=>{var a,n;t.preventDefault();try{b(!0),w("");const i=await L(o.email,o.password);y.getState().login({token:i.access_token}),p("/driver/dashboard",{replace:!0})}catch(i){w(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.detail)||"Login failed. Please check your credentials.")}finally{b(!1)}};if(h&&d==="driver")return null;if(C)return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"var(--bw-bg)"},children:e.jsx("div",{style:{color:"var(--bw-text)",fontFamily:"Work Sans, sans-serif",fontSize:"16px"},children:"Loading..."})});const c=(s==null?void 0:s.company_name)||"Our Service";return e.jsxs("main",{className:"bw","aria-label":"Driver Login",style:{margin:0,padding:0,height:"100vh",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",height:"100vh",width:"100%"},children:[e.jsxs("div",{ref:f,className:"driver-login-image-container",style:{width:"60%",height:"100%",position:"relative",backgroundImage:l?`url(${l})`:"none",backgroundColor:l?"transparent":"#f3f4f6",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",transition:"background-image 0.3s ease",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"48px",paddingTop:"120px"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:1}}),e.jsx("div",{style:{color:"white",textAlign:"center",maxWidth:"600px",zIndex:2,position:"relative",padding:"32px"},children:e.jsxs("p",{style:{fontFamily:"Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:"20px",lineHeight:"1.6",fontWeight:300,textShadow:"0 2px 8px rgba(0, 0, 0, 0.5)",margin:0},children:["Welcome back to ",c,". Sign in to continue managing your rides and driver account."]})})]}),e.jsx("div",{role:"form","aria-labelledby":"login-title",className:"driver-login-form-container",style:{width:"40%",height:"100%",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",backgroundColor:"var(--bw-bg)",overflowY:"auto"},children:e.jsxs("div",{style:{width:"100%",maxWidth:"100%"},children:[s&&e.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center",alignItems:"center"},children:s.logo_url?e.jsx("img",{src:s.logo_url,alt:c,style:{maxHeight:"60px",maxWidth:"200px",objectFit:"contain"}}):e.jsx("h1",{style:{margin:0,fontSize:"32px",fontWeight:600,color:"var(--bw-text)",fontFamily:"DM Sans, sans-serif"},children:c})}),e.jsx("h2",{id:"login-title",style:{margin:0,fontSize:40,fontFamily:"DM Sans, sans-serif",fontWeight:200},children:"Sign in"}),e.jsx("p",{className:"small-muted",style:{marginTop:6,fontSize:16,fontFamily:"Work Sans, sans-serif",fontWeight:300},children:s?`Sign in to ${c}`:"Sign in to your driver account"}),v&&e.jsx("div",{style:{marginTop:16,padding:"12px",backgroundColor:"rgba(197, 72, 61, 0.1)",border:"1px solid var(--bw-error)",borderRadius:"4px",color:"var(--bw-error)",fontSize:"14px",fontFamily:"Work Sans, sans-serif",width:"100%"},children:v}),e.jsxs("form",{onSubmit:z,style:{marginTop:16,width:"100%"},children:[e.jsx("label",{className:"small-muted",htmlFor:"email",style:{fontFamily:"Work Sans, sans-serif"},children:"Email"}),e.jsxs("div",{style:{position:"relative",marginTop:6,marginBottom:12},children:[e.jsx(N,{size:16,"aria-hidden":!0,style:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",opacity:.7,color:g==="dark"?"#ffffff":void 0}}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"bw-input",style:{padding:"16px 18px 16px 44px",borderRadius:0,fontFamily:"Work Sans, sans-serif"},placeholder:"you@email.com",value:o.email,onChange:S})]}),e.jsx("label",{className:"small-muted",htmlFor:"password",style:{fontFamily:"Work Sans, sans-serif"},children:"Password"}),e.jsxs("div",{style:{position:"relative",marginTop:6},children:[e.jsx(D,{size:16,"aria-hidden":!0,style:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",opacity:.7,color:g==="dark"?"#ffffff":void 0}}),e.jsx("input",{id:"password",name:"password",type:m?"text":"password",required:!0,className:"bw-input",style:{padding:"16px 18px 16px 44px",borderRadius:0,fontFamily:"Work Sans, sans-serif"},placeholder:"••••••••",value:o.password,onChange:S}),e.jsx("button",{type:"button","aria-label":"Toggle password",onClick:()=>j(!m),style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",background:"transparent",border:0,color:g==="dark"?"#ffffff":"#4c4e4eff",cursor:"pointer"},children:m?e.jsx(_,{size:16}):e.jsx(P,{size:16})})]}),e.jsxs("button",{className:"bw-btn",style:{width:"100%",marginTop:16,borderRadius:0,padding:"14px 24px",fontFamily:"Work Sans, sans-serif",fontWeight:500},disabled:u,type:"submit",children:[e.jsx("span",{children:u?"Signing in...":"Sign in"}),!u&&e.jsx(R,{size:16,"aria-hidden":!0})]}),e.jsxs("div",{style:{marginTop:24,width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:16,gap:12},children:[e.jsx("div",{style:{flex:1,height:"1px",backgroundColor:"var(--bw-border)"}}),e.jsx("span",{className:"small-muted",style:{fontSize:"12px",fontFamily:"Work Sans, sans-serif"},children:"or"}),e.jsx("div",{style:{flex:1,height:"1px",backgroundColor:"var(--bw-border)"}})]}),e.jsxs("p",{className:"small-muted",style:{textAlign:"center",marginBottom:16,fontSize:"14px",fontFamily:"Work Sans, sans-serif"},children:["Don't have an account?"," ",e.jsx($,{to:"/driver/verify",style:{color:"var(--bw-fg)",textDecoration:"underline"},children:"Get started"})]})]})]})]})})]}),e.jsx("style",{children:`
        @media (max-width: 768px) {
          .driver-login-image-container {
            display: none !important;
          }
          .driver-login-form-container {
            width: 100% !important;
          }
        }
      `})]})}export{Q as default};
