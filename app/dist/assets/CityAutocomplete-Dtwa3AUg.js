import{x as S}from"./index-DaAC2zqA.js";import{r as s,j as n,a6 as B}from"./react-vendor-JE9gdlBQ.js";import{u as K}from"./StateAutocomplete-CLQ3OVdu.js";async function Q(o,a){const{data:d}=await S.post(`/v1/users/add/${o}`,a);return d}async function X(){const{data:o}=await S.get("/v1/users/");return o}const O=K;function Y({value:o,onChange:a,onCitySelect:d,selectedState:r,placeholder:T="Enter city",label:C,disabled:I=!1,required:j=!1,className:L="bw-input",style:z}){const[i,l]=s.useState([]),[D,c]=s.useState(!1),[x,f]=s.useState(-1),A=s.useRef(null),g=s.useRef(null),p=s.useRef(null),b=s.useCallback(()=>{if(!r)return[];const e=O[r.toUpperCase()];return e?e.cities:[]},[r]),E=s.useCallback(e=>{const t=b();if(t.length===0)return[];if(!e.trim()||e.length<1)return[];const u=e.toLowerCase();return t.filter(k=>k.toLowerCase().includes(u)).slice(0,10)},[b]),[R,w]=s.useState(!1),[h,m]=s.useState(""),W=e=>{const t=e.target.value;w(!0),m(t),c(!0),p.current&&clearTimeout(p.current),t.trim().length>=1&&r?p.current=setTimeout(()=>{const u=E(t);l(u),f(-1)},200):(l([]),r||a(""))},v=e=>{a(e),w(!1),m(""),c(!1),l([]),d&&d(e)},F=e=>{if(!D||i.length===0){if(e.key==="Enter"&&h.trim()&&r){const u=b().find(k=>k.toLowerCase()===h.toLowerCase());u&&v(u)}return}switch(e.key){case"ArrowDown":e.preventDefault(),f(t=>t<i.length-1?t+1:t);break;case"ArrowUp":e.preventDefault(),f(t=>t>0?t-1:-1);break;case"Enter":e.preventDefault(),x>=0&&x<i.length&&v(i[x]);break;case"Escape":c(!1),f(-1);break}},U=()=>{if(!r){l([]),c(!1);return}const e=b();if(o.trim()&&!R){const t=E(o);l(t.length>0?t:e.slice(0,10))}else l(e.slice(0,10));c(!0)},M=()=>R?h:o||"";s.useEffect(()=>{!r&&o&&(a(""),w(!1),m(""))},[r,o,a]),s.useEffect(()=>{const e=t=>{g.current&&!g.current.contains(t.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),s.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]);const y=I||!r;return n.jsxs("div",{ref:g,style:{position:"relative",width:"100%"},children:[C&&n.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"clamp(13px, 2vw, 14px)",fontWeight:500,color:"var(--bw-text)"},children:[C," ",j&&"*"]}),n.jsx("div",{style:{position:"relative"},children:n.jsx("input",{ref:A,className:L,type:"text",value:M(),onChange:W,onKeyDown:F,onFocus:U,placeholder:r?T:"Select state first",disabled:y,required:j,style:{width:"100%",padding:"clamp(10px, 2vw, 12px)",borderRadius:"8px",border:"1px solid var(--bw-border)",backgroundColor:"var(--bw-bg)",color:"var(--bw-text)",fontFamily:"Work Sans, sans-serif",fontSize:"clamp(13px, 2vw, 14px)",opacity:y?.6:1,cursor:y?"not-allowed":"text",...z}})}),D&&i.length>0&&r&&n.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",backgroundColor:"var(--bw-bg)",border:"1px solid var(--bw-border)",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"300px",overflowY:"auto",overflowX:"hidden"},children:i.map((e,t)=>n.jsx("button",{type:"button",onClick:()=>v(e),onMouseEnter:()=>f(t),style:{width:"100%",padding:"clamp(10px, 2vw, 12px)",textAlign:"left",backgroundColor:x===t?"var(--bw-bg-hover, rgba(0, 0, 0, 0.05))":"transparent",border:"none",borderBottom:t<i.length-1?"1px solid var(--bw-border)":"none",color:"var(--bw-text)",cursor:"pointer",fontFamily:"Work Sans, sans-serif",fontSize:"clamp(13px, 2vw, 14px)",transition:"background-color 0.2s ease"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(B,{size:14,style:{flexShrink:0,opacity:.7}}),n.jsx("div",{style:{flex:1,minWidth:0},children:n.jsx("div",{style:{fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e})})]})},e))})]})}export{Y as C,Q as c,X as g};
