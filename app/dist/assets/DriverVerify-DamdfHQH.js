import{r as c,j as e,a5 as S}from"./react-vendor-JE9gdlBQ.js";import{v as j}from"./driver-ZL_jGIpG.js";import{w as C,t as F}from"./index-DaAC2zqA.js";import{u as W}from"./useFavicon-Bc8ZFvv0.js";import{b as z}from"./router-DL0rZlEF.js";import"./vendor-C1Py2TwH.js";import"./utils-2shQNo7D.js";function V(){W();const m=C(),y=z(),[n,s]=c.useState(!1),[l,i]=c.useState(""),[t,h]=c.useState(""),{tenantInfo:a,isLoading:w}=F(),k=async r=>{var f,p,b,g,u,v;if(r.preventDefault(),!t.trim()){i("Please enter a verification token");return}if(!m){i("Tenant subdomain is required. Please access this page from a valid tenant subdomain.");return}try{s(!0),i("");const o=await j(m,t.trim());if(o.success){const d=((f=o.data)==null?void 0:f.tenant_id)||((p=o.data)==null?void 0:p.tenantId);if(!d){i("Tenant ID not found in verification response"),s(!1);return}y("/driver/register",{replace:!0,state:{token:t.trim(),tenantId:d}})}else i(o.message||"Invalid verification token"),s(!1)}catch(o){console.error("Driver verification error:",o);const d=((g=(b=o.response)==null?void 0:b.data)==null?void 0:g.detail)||((v=(u=o.response)==null?void 0:u.data)==null?void 0:v.message)||o.message||"Failed to verify token";i(d),s(!1)}},x=(a==null?void 0:a.company_name)||"Our Service";return w?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"var(--bw-bg)"},children:e.jsx("div",{style:{color:"var(--bw-text)",fontFamily:"Work Sans, sans-serif",fontSize:"16px"},children:"Loading..."})}):e.jsx("main",{className:"bw",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",padding:"24px",backgroundColor:"var(--bw-bg)"},children:e.jsxs("div",{style:{maxWidth:"500px",width:"100%",textAlign:"center"},children:[a&&e.jsx("div",{style:{marginBottom:"32px",display:"flex",justifyContent:"center",alignItems:"center"},children:a.logo_url?e.jsx("img",{src:a.logo_url,alt:x,style:{maxHeight:"60px",maxWidth:"200px",objectFit:"contain"}}):e.jsx("h1",{style:{margin:0,fontSize:"32px",fontWeight:600,color:"var(--bw-text)",fontFamily:"DM Sans, sans-serif"},children:x})}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h2",{style:{margin:0,fontSize:"24px",fontWeight:600,color:"var(--bw-text)",fontFamily:"DM Sans, sans-serif",marginBottom:"8px"},children:"Driver Verification"}),e.jsx("p",{style:{margin:0,fontSize:"14px",color:"var(--bw-text-secondary)",fontFamily:"Work Sans, sans-serif"},children:"Enter your verification token to continue"})]}),e.jsxs("form",{onSubmit:k,style:{width:"100%",textAlign:"left"},children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{htmlFor:"token",style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:500,color:"var(--bw-text)",fontFamily:"Work Sans, sans-serif"},children:"Verification Token"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(S,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--bw-text-secondary)",pointerEvents:"none"}}),e.jsx("input",{id:"token",type:"text",value:t,onChange:r=>{h(r.target.value),i("")},placeholder:"Enter your verification token",disabled:n,style:{width:"100%",padding:"12px 12px 12px 40px",fontSize:"16px",fontFamily:"Work Sans, sans-serif",border:l?"1px solid var(--bw-error)":"1px solid var(--bw-border)",borderRadius:"8px",backgroundColor:"var(--bw-surface)",color:"var(--bw-text)",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"},onFocus:r=>{r.target.style.borderColor="var(--bw-primary)"},onBlur:r=>{r.target.style.borderColor=l?"var(--bw-error)":"var(--bw-border)"}})]})]}),l&&e.jsx("div",{style:{padding:"12px",backgroundColor:"rgba(197, 72, 61, 0.1)",border:"1px solid var(--bw-error)",borderRadius:"8px",color:"var(--bw-error)",fontSize:"14px",fontFamily:"Work Sans, sans-serif",marginBottom:"20px"},children:l}),e.jsx("button",{type:"submit",disabled:n||!t.trim(),style:{width:"100%",padding:"12px 24px",fontSize:"16px",fontWeight:600,fontFamily:"Work Sans, sans-serif",color:"white",backgroundColor:n||!t.trim()?"var(--bw-disabled)":"var(--bw-primary)",border:"none",borderRadius:"8px",cursor:n||!t.trim()?"not-allowed":"pointer",transition:"background-color 0.2s",boxSizing:"border-box"},onMouseEnter:r=>{!n&&t.trim()&&(r.currentTarget.style.backgroundColor="var(--bw-primary-hover)")},onMouseLeave:r=>{!n&&t.trim()&&(r.currentTarget.style.backgroundColor="var(--bw-primary)")},children:n?"Verifying...":"Verify Token"})]})]})})}export{V as default};
