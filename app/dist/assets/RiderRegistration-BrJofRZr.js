import{t as A,u as S,_ as D,y as L}from"./index-DaAC2zqA.js";import{r as i,j as e,b as C,a1 as B,J as E,O as P,a2 as $,a3 as q,a4 as Y,$ as M}from"./react-vendor-JE9gdlBQ.js";import{C as H,c as O}from"./CityAutocomplete-Dtwa3AUg.js";import{d as U,b as J,L as F}from"./router-DL0rZlEF.js";import{u as G}from"./useFavicon-Bc8ZFvv0.js";import{C as Q}from"./CountryAutocomplete-DcIo2GPh.js";import{S as V}from"./StateAutocomplete-CLQ3OVdu.js";import"./utils-2shQNo7D.js";import"./vendor-C1Py2TwH.js";function ie(){G();const[g,_]=i.useState(!1),[t,m]=i.useState({email:"",password:"",first_name:"",last_name:"",phone_no:"",address:"",city:"",state:"",country:"",postal_code:""}),[h,w]=i.useState(!1),[k,c]=i.useState(""),[p,N]=i.useState(null),[l,W]=i.useState("dark"),x=i.useRef(null);U();const{tenantInfo:n,isLoading:y,slug:u}=A(),b=J(),{isAuthenticated:v,role:j}=S(),T=()=>{if(typeof window>"u")return"dark";const s=document.documentElement.getAttribute("data-theme")||document.body.getAttribute("data-theme");return s==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":s||"dark"};i.useEffect(()=>{const s=()=>{const o=T();W(o)};s();const r=new MutationObserver(s);r.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),r.observe(document.body,{attributes:!0,attributeFilter:["data-theme"]});const a=window.matchMedia("(prefers-color-scheme: dark)");return a.addEventListener("change",s),()=>{r.disconnect(),a.removeEventListener("change",s)}},[]),i.useEffect(()=>{const s=new IntersectionObserver(r=>{r.forEach(a=>{a.isIntersecting&&!p&&(D(()=>import("./nikita-pishchugin-IdyI9y8BfB4-unsplash-CabSUqcr.js"),[]).then(o=>{N(o.default)}),s.disconnect())})},{rootMargin:"50px"});return x.current&&s.observe(x.current),()=>{s.disconnect()}},[p]),i.useEffect(()=>{v&&j==="rider"&&b("/riders/profile",{replace:!0})},[v,j,b]);const R=s=>{const a=s.replace(/\D/g,"").slice(0,10);return a.length===0?"":a.length<=3?`(${a}`:a.length<=6?`(${a.slice(0,3)}) ${a.slice(3)}`:`(${a.slice(0,3)}) ${a.slice(3,6)}-${a.slice(6)}`},d=s=>{const{name:r,value:a}=s.target;m(r==="phone_no"?{...t,[r]:R(a)}:{...t,[r]:a})},z=async s=>{var r,a;if(s.preventDefault(),y){c("Loading tenant information...");return}if(n&&!u){console.error("Tenant info loaded but slug is missing:",{tenantInfo:n}),c("Unable to determine tenant slug. Please refresh the page or contact support.");return}if(!u){c("Tenant information is required. Please access this page with a valid tenant slug.");return}try{w(!0),c("");const o=t.phone_no.replace(/\D/g,"");await O(u,{email:t.email,first_name:t.first_name,last_name:t.last_name,phone_no:o,address:t.address,city:t.city,state:t.state,country:t.country,postal_code:t.postal_code,password:t.password});const I=await L(t.email,t.password);S.getState().login({token:I.access_token}),b("/riders/profile",{replace:!0})}catch(o){c(((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.detail)||o.message||"Registration failed. Please try again.")}finally{w(!1)}};if(v&&j==="rider")return null;if(y)return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"var(--bw-bg)"},children:e.jsx("div",{style:{color:"var(--bw-text)",fontFamily:"Work Sans, sans-serif",fontSize:"16px"},children:"Loading..."})});if(!y&&!n&&!u)return e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"var(--bw-bg)",padding:"24px"},children:[e.jsx("div",{style:{color:"var(--bw-error)",fontFamily:"Work Sans, sans-serif",fontSize:"16px",marginBottom:"16px",textAlign:"center"},children:"Tenant not found. Please check the URL and try again."}),e.jsx(F,{to:"/",style:{textDecoration:"none"},children:e.jsx("button",{className:"bw-btn",style:{borderRadius:0,padding:"14px 24px",fontFamily:"Work Sans, sans-serif",fontWeight:500},children:"Go to Home"})})]});const f=(n==null?void 0:n.company_name)||"Our Service";return e.jsxs("main",{className:"bw","aria-label":"Rider Registration",style:{margin:0,padding:0,minHeight:"100vh",overflow:"auto"},children:[e.jsxs("div",{style:{display:"flex",minHeight:"100vh",width:"100%"},children:[e.jsxs("div",{ref:x,className:"rider-registration-image-container",style:{width:"60%",height:"100%",position:"relative",backgroundImage:p?`url(${p})`:"none",backgroundColor:p?"transparent":"#f3f4f6",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",transition:"background-image 0.3s ease",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"48px",paddingTop:"120px"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:1}}),e.jsx("div",{style:{color:"white",textAlign:"center",maxWidth:"600px",zIndex:2,position:"relative",padding:"32px"},children:e.jsxs("p",{style:{fontFamily:"Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:"20px",lineHeight:"1.6",fontWeight:300,textShadow:"0 2px 8px rgba(0, 0, 0, 0.5)",margin:0},children:["Join ",f,"'s community of riders. Create your account to start booking rides and managing your profile."]})})]}),e.jsx("div",{role:"form","aria-labelledby":"registration-title",className:"rider-registration-form-container",style:{width:"40%",minHeight:"100vh",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",padding:"24px",paddingTop:"clamp(24px, 5vw, 48px)",backgroundColor:"var(--bw-bg)",overflowY:"auto"},children:e.jsxs("div",{style:{width:"100%",maxWidth:"100%"},children:[n&&e.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center",alignItems:"center"},children:n.logo_url?e.jsx("img",{src:n.logo_url,alt:f,style:{maxHeight:"60px",maxWidth:"200px",objectFit:"contain"}}):e.jsx("h1",{style:{margin:0,fontSize:"32px",fontWeight:600,color:"var(--bw-text)",fontFamily:"DM Sans, sans-serif"},children:f})}),e.jsx("h2",{id:"registration-title",style:{margin:0,fontSize:40,fontFamily:"DM Sans, sans-serif",fontWeight:200},children:"Create account"}),e.jsx("p",{className:"small-muted",style:{marginTop:6,fontSize:16,fontFamily:"Work Sans, sans-serif",fontWeight:300},children:n?`Sign up for ${f}`:"Sign up to get started"}),k&&e.jsx("div",{style:{marginTop:16,padding:"12px",backgroundColor:"rgba(197, 72, 61, 0.1)",border:"1px solid var(--bw-error)",borderRadius:"4px",color:"var(--bw-error)",fontSize:"14px",fontFamily:"Work Sans, sans-serif",width:"100%"},children:k}),e.jsxs("form",{onSubmit:z,style:{marginTop:16,width:"100%"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[e.jsx("label",{className:"small-muted",htmlFor:"first_name",style:{fontFamily:"Work Sans, sans-serif"},children:"First name"}),e.jsx("label",{className:"small-muted",htmlFor:"last_name",style:{fontFamily:"Work Sans, sans-serif"},children:"Last name"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(C,{size:16,"aria-hidden":!0,style:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",opacity:.7,color:l==="dark"?"#ffffff":void 0}}),e.jsx("input",{id:"first_name",name:"first_name",type:"text",required:!0,className:"bw-input",style:{padding:"16px 18px 16px 44px",borderRadius:0,fontFamily:"Work Sans, sans-serif"},placeholder:"John",value:t.first_name,onChange:d})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(C,{size:16,"aria-hidden":!0,style:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",opacity:.7,color:l==="dark"?"#ffffff":void 0}}),e.jsx("input",{id:"last_name",name:"last_name",type:"text",required:!0,className:"bw-input",style:{padding:"16px 18px 16px 44px",borderRadius:0,fontFamily:"Work Sans, sans-serif"},placeholder:"Doe",value:t.last_name,onChange:d})]})]}),e.jsx("label",{className:"small-muted",htmlFor:"email",style:{fontFamily:"Work Sans, sans-serif"},children:"Email"}),e.jsxs("div",{style:{position:"relative",marginTop:6,marginBottom:12},children:[e.jsx(B,{size:16,"aria-hidden":!0,style:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",opacity:.7,color:l==="dark"?"#ffffff":void 0}}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"bw-input",style:{padding:"16px 18px 16px 44px",borderRadius:0,fontFamily:"Work Sans, sans-serif"},placeholder:"you@email.com",value:t.email,onChange:d})]}),e.jsx("label",{className:"small-muted",htmlFor:"phone_no",style:{fontFamily:"Work Sans, sans-serif"},children:"Phone number"}),e.jsxs("div",{style:{position:"relative",marginTop:6,marginBottom:12},children:[e.jsx(E,{size:16,"aria-hidden":!0,style:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",opacity:.7,color:l==="dark"?"#ffffff":void 0}}),e.jsx("input",{id:"phone_no",name:"phone_no",type:"tel",required:!0,className:"bw-input",style:{padding:"16px 18px 16px 44px",borderRadius:0,fontFamily:"Work Sans, sans-serif"},placeholder:"(555) 555-5555",value:t.phone_no,onChange:d,maxLength:14})]}),e.jsx("label",{className:"small-muted",htmlFor:"address",style:{fontFamily:"Work Sans, sans-serif"},children:"Address"}),e.jsxs("div",{style:{position:"relative",marginTop:6,marginBottom:12},children:[e.jsx(P,{size:16,"aria-hidden":!0,style:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",opacity:.7,color:l==="dark"?"#ffffff":void 0}}),e.jsx("input",{id:"address",name:"address",type:"text",required:!0,className:"bw-input",style:{padding:"16px 18px 16px 44px",borderRadius:0,fontFamily:"Work Sans, sans-serif"},placeholder:"123 Main St",value:t.address,onChange:d})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[e.jsx("label",{className:"small-muted",htmlFor:"city",style:{fontFamily:"Work Sans, sans-serif"},children:"City"}),e.jsx("label",{className:"small-muted",htmlFor:"state",style:{fontFamily:"Work Sans, sans-serif"},children:"State"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[e.jsx(H,{value:t.city,onChange:s=>m({...t,city:s}),selectedState:t.state,placeholder:"New York",className:"bw-input",style:{padding:"16px 18px",borderRadius:0},required:!0}),e.jsx(V,{value:t.state,onChange:s=>m({...t,state:s,city:""}),placeholder:"NY",className:"bw-input",style:{padding:"16px 18px",borderRadius:0},required:!0})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[e.jsx("label",{className:"small-muted",htmlFor:"country",style:{fontFamily:"Work Sans, sans-serif"},children:"Country"}),e.jsx("label",{className:"small-muted",htmlFor:"postal_code",style:{fontFamily:"Work Sans, sans-serif"},children:"Postal code"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[e.jsx(Q,{value:t.country,onChange:s=>m({...t,country:s}),placeholder:"USA",className:"bw-input",style:{padding:"16px 18px",borderRadius:0},required:!0}),e.jsx("input",{id:"postal_code",name:"postal_code",type:"text",required:!0,className:"bw-input",style:{padding:"16px 18px",borderRadius:0,fontFamily:"Work Sans, sans-serif"},placeholder:"10001",value:t.postal_code,onChange:d,maxLength:5})]}),e.jsx("label",{className:"small-muted",htmlFor:"password",style:{fontFamily:"Work Sans, sans-serif"},children:"Password"}),e.jsxs("div",{style:{position:"relative",marginTop:6},children:[e.jsx($,{size:16,"aria-hidden":!0,style:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",opacity:.7,color:l==="dark"?"#ffffff":void 0}}),e.jsx("input",{id:"password",name:"password",type:g?"text":"password",required:!0,className:"bw-input",style:{padding:"16px 18px 16px 44px",borderRadius:0,fontFamily:"Work Sans, sans-serif"},placeholder:"••••••••",value:t.password,onChange:d}),e.jsx("button",{type:"button","aria-label":"Toggle password",onClick:()=>_(!g),style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",background:"transparent",border:0,color:l==="dark"?"#ffffff":"#4c4e4eff",cursor:"pointer"},children:g?e.jsx(q,{size:16}):e.jsx(Y,{size:16})})]}),e.jsxs("button",{className:"bw-btn",style:{width:"100%",marginTop:16,borderRadius:0,padding:"14px 24px",fontFamily:"Work Sans, sans-serif",fontWeight:500},disabled:h,type:"submit",children:[e.jsx("span",{children:h?"Creating account...":"Create account"}),!h&&e.jsx(M,{size:16,"aria-hidden":!0})]}),e.jsxs("div",{style:{marginTop:24,width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:16,gap:12},children:[e.jsx("div",{style:{flex:1,height:"1px",backgroundColor:"var(--bw-border)"}}),e.jsx("span",{className:"small-muted",style:{fontSize:"12px",fontFamily:"Work Sans, sans-serif"},children:"or"}),e.jsx("div",{style:{flex:1,height:"1px",backgroundColor:"var(--bw-border)"}})]}),e.jsxs("p",{className:"small-muted",style:{textAlign:"center",marginBottom:16,fontSize:"14px",fontFamily:"Work Sans, sans-serif"},children:["Already have an account?"," ",e.jsx(F,{to:"/riders/login",style:{color:"var(--bw-fg)",textDecoration:"underline"},children:"signin"})]})]})]})]})})]}),e.jsx("style",{children:`
        @media (max-width: 768px) {
          .rider-registration-image-container {
            display: none !important;
          }
          .rider-registration-form-container {
            width: 100% !important;
          }
        }
      `})]})}export{ie as default};
