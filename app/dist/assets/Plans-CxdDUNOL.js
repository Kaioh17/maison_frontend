import{r as s,j as e}from"./react-vendor-JE9gdlBQ.js";import{f as b}from"./index-DaAC2zqA.js";import{u as z}from"./subscription-CVBCrPam.js";import{U as E}from"./UpgradePlanButton-C63cPaCY.js";import{u as F,S as I}from"./SettingsMenuBar-Cp_MNEJw.js";import{b as U}from"./router-DL0rZlEF.js";import"./vendor-C1Py2TwH.js";import"./utils-2shQNo7D.js";function O(){var y,h;const[d,f]=s.useState(null),[S,j]=s.useState(!0),[o,k]=s.useState(window.innerWidth<=768),{isOpen:w}=F(),[c,a]=s.useState(null),[v,x]=s.useState(null);U(),s.useEffect(()=>{const t=()=>{k(window.innerWidth<=768)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),s.useEffect(()=>{(async()=>{try{const i=await b();f(i.data)}catch(i){console.error("Failed to load data:",i)}finally{j(!1)}})()},[]);const W=async t=>{var i,p;a(t.product_type),x(null);try{const r=await z({price_id:t.price_id,product_type:t.product_type});if(r.success){alert("Subscription upgrade initiated successfully!");const l=await b();f(l.data),a(null)}else x(r.error||"Failed to upgrade subscription"),a(null)}catch(r){x(((p=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:p.error)||(r==null?void 0:r.message)||"Failed to upgrade subscription"),a(null)}};if(S)return e.jsx("div",{className:"bw bw-container",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",padding:"clamp(16px, 3vw, 24px) 0"},children:e.jsx("div",{className:"bw-loading",style:{fontSize:"clamp(14px, 2vw, 16px)",fontFamily:'"Work Sans", sans-serif',color:"var(--bw-muted)"},children:"Loading..."})});const P=[{name:"Starter",product_type:"starter",price:"$0.00",period:"/month",description:"Perfect for solo drivers and small fleets.",price_id:"price_1ShzxJQtWPwjkVcEAMWx8Sgq",features:[{text:"Up to 5 vehicles",included:!0},{text:"Up to 10 drivers",included:!0},{text:"Basic booking system",included:!0},{text:"Email support",included:!0}]},{name:"Growth",product_type:"growth",price:"$100",period:"/month",description:"Ideal for growing businesses",popular:!0,price_id:"price_1Si00KQtWPwjkVcEa7LKC5EM",features:[{text:"Up to 25 vehicles",included:!0},{text:"Up to 50 drivers",included:!0},{text:"Advanced booking system",included:!0},{text:"Email & phone support",included:!0},{text:"Custom branding",included:!0},{text:"Advanced analytics",included:!0}]},{name:"Fleet",product_type:"fleet",price:"$300",period:"/month",description:"For large fleets and enterprises",price_id:"price_1Si01bQtWPwjkVcEMk6XJREA",features:[{text:"Unlimited vehicles",included:!0},{text:"Unlimited drivers",included:!0},{text:"Enterprise booking system",included:!0},{text:"24/7 dedicated support",included:!0},{text:"Custom branding",included:!0},{text:"Advanced analytics",included:!0}]}],u=((h=(y=d==null?void 0:d.profile)==null?void 0:y.subscription_plan)==null?void 0:h.toLowerCase())||"free",g=["starter","growth","fleet"],_=()=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"var(--bw-success)"},children:e.jsx("path",{d:"M20 6L9 17l-5-5"})});return e.jsxs("div",{className:"bw",style:{display:"flex",minHeight:"100vh"},children:[e.jsx(I,{}),e.jsxs("div",{style:{marginLeft:o?"0":w?"20%":"64px",transition:"margin-left 0.3s ease",width:o?"100%":w?"calc(100% - 20%)":"calc(100% - 64px)",maxWidth:"100%",overflowX:"hidden",boxSizing:"border-box"},children:[e.jsx("div",{style:{width:"100%",maxWidth:"100%",padding:"clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px)",marginBottom:"clamp(24px, 4vw, 32px)",boxSizing:"border-box"},children:e.jsx("h1",{style:{fontSize:"clamp(24px, 4vw, 32px)",margin:0,fontFamily:'"DM Sans", sans-serif',fontWeight:200,color:"var(--bw-text)"},children:"Subscription Plans"})}),e.jsxs("div",{className:"bw-container",style:{padding:"clamp(24px, 4vw, 40px) clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px)",maxWidth:"100%",overflowX:"hidden",boxSizing:"border-box"},children:[v&&e.jsx("div",{style:{marginBottom:"clamp(16px, 3vw, 24px)",padding:"clamp(12px, 2vw, 16px)",backgroundColor:"var(--bw-error, #C5483D)",color:"#ffffff",borderRadius:"clamp(4px, 0.8vw, 8px)",fontSize:"clamp(12px, 1.5vw, 14px)",fontFamily:'"Work Sans", sans-serif'},children:v}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:o?"1fr":"repeat(3, minmax(0, 1fr))",gap:"clamp(16px, 2vw, 24px)",width:"100%",maxWidth:"100%"},children:P.map(t=>{const i=g.indexOf(u),p=g.indexOf(t.product_type),r=u===t.product_type,l=p<i,n=r||l;return e.jsxs("div",{className:"bw-card",style:{padding:"clamp(32px, 4vw, 40px) clamp(20px, 3vw, 24px) clamp(20px, 3vw, 24px) clamp(20px, 3vw, 24px)",borderRadius:"clamp(8px, 1.5vw, 12px)",border:t.popular&&!n?"2px solid var(--bw-accent)":"1px solid var(--bw-border)",position:"relative",opacity:n?.5:1,cursor:n?"not-allowed":"pointer",backgroundColor:"var(--bw-bg-secondary)",display:"flex",flexDirection:"column",justifyContent:"center"},children:[t.popular&&!n&&e.jsx("div",{style:{position:"absolute",top:"-12px",left:"50%",transform:"translateX(-50%)",background:"var(--bw-accent)",color:"#ffffff",padding:"4px 16px",fontSize:"clamp(11px, 1.3vw, 12px)",fontFamily:'"Work Sans", sans-serif',fontWeight:600,borderRadius:"4px"},children:"Most Popular"}),r&&e.jsx("div",{style:{position:"absolute",top:"-12px",left:"50%",transform:"translateX(-50%)",background:"var(--bw-muted)",color:"#ffffff",padding:"4px 16px",fontSize:"clamp(11px, 1.3vw, 12px)",fontFamily:'"Work Sans", sans-serif',fontWeight:600,borderRadius:"4px"},children:"Current Plan"}),e.jsxs("div",{style:{textAlign:"center",marginBottom:"clamp(16px, 2.5vw, 20px)"},children:[e.jsx("h4",{style:{fontFamily:'"DM Sans", sans-serif',fontSize:"clamp(20px, 3vw, 24px)",fontWeight:400,color:"var(--bw-text)",marginBottom:"clamp(8px, 1.5vw, 12px)"},children:t.name}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"center",gap:"clamp(4px, 1vw, 8px)",marginBottom:"clamp(8px, 1.5vw, 12px)"},children:[e.jsx("span",{style:{fontFamily:'"DM Sans", sans-serif',fontSize:"clamp(28px, 4vw, 36px)",fontWeight:200,color:"var(--bw-text)"},children:t.price}),e.jsx("span",{style:{fontFamily:'"Work Sans", sans-serif',fontSize:"clamp(12px, 1.5vw, 14px)",color:"var(--bw-muted)"},children:t.period})]}),e.jsx("p",{style:{fontFamily:'"Work Sans", sans-serif',fontSize:"clamp(12px, 1.5vw, 14px)",color:"var(--bw-muted)",marginBottom:"clamp(12px, 2vw, 16px)"},children:t.description}),e.jsx("button",{className:t.popular&&!n?"bw-btn":"bw-btn-outline",onClick:()=>!n&&W(t),disabled:n||c!==null,style:{fontSize:"clamp(12px, 1.5vw, 14px)",padding:"clamp(10px, 1.5vw, 12px) clamp(16px, 2.5vw, 20px)",width:"100%",cursor:n?"not-allowed":"pointer",opacity:c===t.product_type?.6:1,fontFamily:'"Work Sans", sans-serif',fontWeight:600,borderRadius:7},children:c===t.product_type?"Processing...":r?"Current Plan":l?"Lower Plan":"Upgrade"})]}),e.jsx("div",{style:{borderTop:"1px solid var(--bw-border)",paddingTop:"clamp(16px, 2.5vw, 20px)",marginTop:"clamp(16px, 2.5vw, 20px)"},children:e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,display:"flex",flexDirection:"column",gap:"clamp(8px, 1.5vw, 12px)"},children:t.features.map((m,C)=>e.jsxs("li",{style:{display:"flex",alignItems:"center",gap:"clamp(8px, 1.5vw, 12px)"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:m.included?e.jsx(_,{}):null}),e.jsx("span",{style:{fontFamily:'"Work Sans", sans-serif',fontSize:"clamp(12px, 1.5vw, 14px)",color:m.included?"var(--bw-text)":"var(--bw-muted)"},children:m.text})]},C))})})]},t.product_type)})})]}),e.jsx(E,{currentPlan:u,onUpgradeClick:()=>window.scrollTo({top:0,behavior:"smooth"}),isMobile:o})]})]})}export{O as default};
