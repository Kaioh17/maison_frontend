import{r as n,j as e,i as X,X as q,an as O}from"./react-vendor-JE9gdlBQ.js";import{m as D,C as Y,F as G}from"./index-DaAC2zqA.js";import{u as J,S as K}from"./SettingsMenuBar-Cp_MNEJw.js";import{b as Q}from"./router-DL0rZlEF.js";import"./vendor-C1Py2TwH.js";import"./utils-2shQNo7D.js";function re(){const[i,u]=n.useState(null),[B,M]=n.useState(!0),[_,h]=n.useState(!1),[g,z]=n.useState(!1),[o,T]=n.useState(window.innerWidth<=768),{isOpen:R}=J(),[d,N]=n.useState(!1),[c,L]=n.useState(!1),[x,E]=n.useState(!1),[t,y]=n.useState(null),[S,j]=n.useState(null),[p,C]=n.useState(null),[F,W]=n.useState(null),[w,I]=n.useState(!1);Q();const[s,f]=n.useState({theme:"",primary_color:"",secondary_color:"",accent_color:"",favicon_url:"",slug:"",email_from_name:"",email_from_address:"",logo_url:"",enable_branding:!1});n.useEffect(()=>{const a=()=>{T(window.innerWidth<=768)};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),n.useEffect(()=>{(async()=>{try{const l=await D("branding");l.branding&&(u(l.branding),f(l.branding))}catch(l){console.error("Failed to load branding data:",l)}finally{M(!1)}})()},[]);const v=(a,l)=>{f(r=>({...r,[a]:l}))},H=a=>{var r;const l=(r=a.target.files)==null?void 0:r[0];if(l){y(l);const b=new FileReader;b.onload=k=>{var m;j((m=k.target)==null?void 0:m.result)},b.readAsDataURL(l)}},U=a=>{var r;const l=(r=a.target.files)==null?void 0:r[0];if(l){C(l);const b=new FileReader;b.onload=k=>{var m;W((m=k.target)==null?void 0:m.result)},b.readAsDataURL(l)}},P=async()=>{if(!(!t&&!p))try{I(!0),await Y(t||void 0,p||void 0);const a=await D("branding");a.branding&&(u(a.branding),f(a.branding)),y(null),j(null),C(null),W(null);const l=[];t&&l.push("Logo"),p&&l.push("Favicon"),alert(`${l.join(" and ")} updated successfully!`)}catch(a){console.error("Failed to update logo/favicon:",a),alert("Failed to update logo/favicon. Please try again.")}finally{I(!1)}},A=async()=>{try{z(!0);const a=await G({theme:s.theme,primary_color:s.primary_color,secondary_color:s.secondary_color,accent_color:s.accent_color,favicon_url:s.favicon_url,slug:s.slug,email_from_name:s.email_from_name,email_from_address:s.email_from_address,enable_branding:s.enable_branding});u(a),f(a),h(!1),alert("Branding settings updated successfully!")}catch(a){console.error("Failed to update:",a),alert("Failed to update branding settings. Please try again.")}finally{z(!1)}},$=()=>{i&&f(i),h(!1),y(null),j(null),C(null),W(null)};return B?e.jsx("div",{className:"bw bw-container",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",padding:"clamp(16px, 3vw, 24px) 0"},children:e.jsx("div",{className:"bw-loading",style:{fontSize:"clamp(14px, 2vw, 16px)",fontFamily:'"Work Sans", sans-serif',color:"var(--bw-muted)"},children:"Loading..."})}):e.jsxs("div",{className:"bw",style:{display:"flex",minHeight:"100vh"},children:[e.jsx(K,{}),e.jsxs("div",{style:{marginLeft:o?"0":R?"20%":"64px",transition:"margin-left 0.3s ease",width:o?"100%":R?"calc(100% - 20%)":"calc(100% - 64px)",maxWidth:"100%",overflowX:"hidden",boxSizing:"border-box"},children:[e.jsx("div",{style:{width:"100%",maxWidth:"100%",padding:"clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px)",marginBottom:"clamp(24px, 4vw, 32px)",boxSizing:"border-box"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:o?"wrap":"nowrap",gap:"clamp(12px, 2vw, 16px)"},children:[e.jsx("h1",{style:{fontSize:"clamp(24px, 4vw, 32px)",margin:0,fontFamily:'"DM Sans", sans-serif',fontWeight:200,color:"var(--bw-text)"},children:"Branding Settings"}),_?e.jsxs("div",{style:{display:"flex",gap:"clamp(8px, 1.5vw, 12px)",flexWrap:"wrap"},children:[e.jsxs("button",{className:`bw-btn-outline ${x?"custom-hover-border":""}`,onClick:$,onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),disabled:g,style:{padding:o?"clamp(14px, 2.5vw, 18px) clamp(20px, 4vw, 24px)":"14px 24px",fontSize:o?"clamp(14px, 2vw, 16px)":"14px",fontFamily:'"Work Sans", sans-serif',fontWeight:600,display:"flex",alignItems:"center",gap:o?"clamp(8px, 1.5vw, 10px)":"8px",borderRadius:7,border:x?"2px solid rgba(155, 97, 209, 0.81)":void 0,borderColor:x?"rgba(155, 97, 209, 0.81)":void 0,color:x?"rgba(155, 97, 209, 0.81)":"#000000",backgroundColor:x?"var(--bw-bg-secondary)":"#ffffff",transition:"all 0.2s ease"},children:[e.jsx(q,{className:"w-4 h-4",style:{width:o?"clamp(18px, 2.5vw, 20px)":"18px",height:o?"clamp(18px, 2.5vw, 20px)":"18px"}}),e.jsx("span",{children:"Cancel"})]}),e.jsxs("button",{className:`bw-btn bw-btn-action ${c?"custom-hover-border":""}`,onClick:A,onMouseEnter:()=>!g&&L(!0),onMouseLeave:()=>L(!1),disabled:g,style:{padding:o?"clamp(14px, 2.5vw, 18px) clamp(20px, 4vw, 24px)":"14px 24px",fontSize:o?"clamp(14px, 2vw, 16px)":"14px",fontFamily:'"Work Sans", sans-serif',fontWeight:600,display:"flex",alignItems:"center",gap:o?"clamp(8px, 1.5vw, 10px)":"8px",borderRadius:7,backgroundColor:c?"var(--bw-bg-secondary)":"var(--bw-accent)",color:c?"rgba(155, 97, 209, 0.81)":"#ffffff",border:c?"2px solid rgba(155, 97, 209, 0.81)":"none",borderColor:c?"rgba(155, 97, 209, 0.81)":void 0,transition:"all 0.2s ease"},children:[e.jsx(O,{className:"w-4 h-4",style:{width:o?"clamp(18px, 2.5vw, 20px)":"18px",height:o?"clamp(18px, 2.5vw, 20px)":"18px"}}),e.jsx("span",{children:g?"Saving...":"Save"})]})]}):e.jsxs("button",{className:`bw-btn-outline ${d?"custom-hover-border":""}`,onClick:()=>h(!0),onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),style:{padding:o?"clamp(14px, 2.5vw, 18px) clamp(20px, 4vw, 24px)":"14px 24px",fontSize:o?"clamp(14px, 2vw, 16px)":"14px",fontFamily:'"Work Sans", sans-serif',fontWeight:600,display:"flex",alignItems:"center",gap:o?"clamp(8px, 1.5vw, 10px)":"8px",borderRadius:7,border:d?"2px solid rgba(155, 97, 209, 0.81)":void 0,borderColor:d?"rgba(155, 97, 209, 0.81)":void 0,color:d?"rgba(155, 97, 209, 0.81)":"#000000",backgroundColor:d?"var(--bw-bg-secondary)":"#ffffff",transition:"all 0.2s ease"},children:[e.jsx(X,{className:"w-4 h-4",style:{width:o?"clamp(18px, 2.5vw, 20px)":"18px",height:o?"clamp(18px, 2.5vw, 20px)":"18px"}}),e.jsx("span",{children:"Edit"})]})]})}),e.jsx("div",{className:"bw-container",style:{padding:"0 clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px)",maxWidth:"100%",overflowX:"hidden",boxSizing:"border-box"},children:e.jsxs("div",{className:"bw-card",style:{backgroundColor:"var(--bw-bg-secondary)",border:"1px solid var(--bw-border)",borderRadius:"clamp(8px, 1.5vw, 12px)",padding:"clamp(16px, 2.5vw, 24px)"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:o?"1fr":"repeat(2, minmax(0, 1fr))",gap:"clamp(16px, 2vw, 24px)",width:"100%",maxWidth:"100%"},children:[{label:"Theme",field:"theme",type:"select",options:["light","dark","auto"],description:"Default theme for your application interface"},{label:"Primary Color",field:"primary_color",type:"color",description:"Main brand color used throughout the application"},{label:"Secondary Color",field:"secondary_color",type:"color",description:"Secondary brand color for accents and highlights"},{label:"Accent Color",field:"accent_color",type:"color",description:"Accent color for buttons and interactive elements"},{label:"Slug",field:"slug",type:"text",description:"Unique identifier for your tenant (used in URLs)"},{label:"Email From Name",field:"email_from_name",type:"text",description:"Display name shown in emails sent to users"},{label:"Email From Address",field:"email_from_address",type:"email",description:"Email address used as sender for system emails"},{label:"Favicon URL",field:"favicon_url",type:"url",description:"URL to your favicon icon (shown in browser tabs)"},{label:"Enable Branding",field:"enable_branding",type:"checkbox",description:"Enable custom branding across the application"}].map(a=>{var l;return e.jsxs("div",{className:"bw-form-group",style:{gridColumn:a.field==="favicon_url"||a.field==="enable_branding"?o?"span 1":"span 2":"span 1"},children:[e.jsxs("div",{style:{marginBottom:"clamp(4px, 0.8vw, 6px)"},children:[e.jsx("label",{className:"bw-form-label small-muted",style:{fontSize:"clamp(11px, 1.3vw, 13px)",fontFamily:'"Work Sans", sans-serif',fontWeight:300,color:"var(--bw-muted)",display:"block",marginBottom:a.description?"2px":"0"},children:a.label}),a.description&&e.jsx("span",{style:{fontSize:"clamp(10px, 1.2vw, 11px)",fontFamily:'"Work Sans", sans-serif',fontWeight:300,color:"var(--bw-muted)",opacity:.7,display:"block",lineHeight:1.3},children:a.description})]}),_?a.type==="select"?e.jsx("select",{value:s[a.field]||"",onChange:r=>v(a.field,r.target.value),className:"bw-input",style:{width:"100%",padding:"clamp(12px, 2vw, 16px) clamp(14px, 2.5vw, 18px)",fontSize:"clamp(12px, 1.5vw, 14px)",fontFamily:'"Work Sans", sans-serif',borderRadius:0,color:"var(--bw-text)",backgroundColor:"var(--bw-bg)",border:"1px solid var(--bw-border)"},children:(l=a.options)==null?void 0:l.map(r=>e.jsx("option",{value:r,children:r.charAt(0).toUpperCase()+r.slice(1)},r))}):a.type==="checkbox"?e.jsxs("select",{value:s[a.field]?"true":"false",onChange:r=>v(a.field,r.target.value==="true"),className:"bw-input",style:{width:"100%",padding:"clamp(12px, 2vw, 16px) clamp(14px, 2.5vw, 18px)",fontSize:"clamp(12px, 1.5vw, 14px)",fontFamily:'"Work Sans", sans-serif',borderRadius:0,color:"var(--bw-text)",backgroundColor:"var(--bw-bg)",border:"1px solid var(--bw-border)"},children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]}):a.type==="color"?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"clamp(6px, 1vw, 8px)",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"clamp(8px, 1.5vw, 12px)",width:"100%"},children:[e.jsx("input",{type:"color",value:s[a.field]||"#ffffff",onChange:r=>v(a.field,r.target.value),style:{width:"clamp(50px, 7vw, 60px)",height:"clamp(40px, 5vw, 45px)",padding:"0",border:"1px solid var(--bw-border)",borderRadius:"4px",cursor:"pointer",flexShrink:0}}),e.jsx("input",{type:"text",value:s[a.field]||"",onChange:r=>v(a.field,r.target.value),placeholder:"#000000",className:"bw-input",style:{flex:1,padding:"clamp(12px, 2vw, 16px) clamp(14px, 2.5vw, 18px)",fontSize:"clamp(12px, 1.5vw, 14px)",fontFamily:'"Work Sans", sans-serif',borderRadius:0,color:"var(--bw-text)",backgroundColor:"var(--bw-bg)",border:"1px solid var(--bw-border)"}})]}),e.jsx("div",{style:{width:"50%",height:"15px",borderRadius:"4px",backgroundColor:s[a.field]||"#ffffff",border:"1px solid var(--bw-border)",boxShadow:"0 1px 2px rgba(0,0,0,0.1)"}})]}):e.jsx("input",{type:a.type,value:s[a.field]||"",onChange:r=>v(a.field,r.target.value),className:"bw-input",style:{width:"100%",padding:"clamp(12px, 2vw, 16px) clamp(14px, 2.5vw, 18px)",fontSize:"clamp(12px, 1.5vw, 14px)",fontFamily:'"Work Sans", sans-serif',borderRadius:0,color:"var(--bw-text)",backgroundColor:"var(--bw-bg)",border:"1px solid var(--bw-border)"}}):a.type==="color"?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"clamp(6px, 1vw, 8px)"},children:[e.jsx("div",{style:{fontSize:"clamp(12px, 1.5vw, 14px)",fontFamily:'"Work Sans", sans-serif',fontWeight:300,color:"var(--bw-text)",padding:"clamp(12px, 2vw, 16px) 0"},children:s[a.field]||"N/A"}),e.jsx("div",{style:{width:"50%",height:"15px",borderRadius:"4px",backgroundColor:s[a.field]||"#ffffff",border:"1px solid var(--bw-border)",boxShadow:"0 1px 2px rgba(0,0,0,0.1)"}})]}):e.jsx("div",{style:{fontSize:"clamp(12px, 1.5vw, 14px)",fontFamily:'"Work Sans", sans-serif',fontWeight:300,color:"var(--bw-text)",padding:"clamp(12px, 2vw, 16px) 0"},children:a.type==="checkbox"?s[a.field]?"Yes":"No":s[a.field]||"N/A"})]},a.field)})}),e.jsxs("div",{style:{marginTop:"clamp(24px, 4vw, 32px)",paddingTop:"clamp(24px, 4vw, 32px)",borderTop:"1px solid var(--bw-border)"},children:[e.jsxs("div",{style:{marginBottom:"clamp(12px, 2vw, 16px)"},children:[e.jsx("h4",{style:{margin:"0 0 4px 0",fontSize:"clamp(14px, 2vw, 16px)",fontFamily:'"Work Sans", sans-serif',fontWeight:400,color:"var(--bw-text)"},children:"Logo"}),e.jsx("span",{style:{fontSize:"clamp(10px, 1.2vw, 11px)",fontFamily:'"Work Sans", sans-serif',fontWeight:300,color:"var(--bw-muted)",opacity:.7,display:"block",lineHeight:1.3},children:"Upload your company logo to display across the application"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"clamp(12px, 2vw, 16px)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"clamp(12px, 2vw, 16px)",flexWrap:"wrap"},children:[e.jsx("input",{type:"file",accept:"image/*",onChange:H,className:"bw-input",style:{flex:1,minWidth:o?"100%":"200px",padding:"clamp(12px, 2vw, 16px) clamp(14px, 2.5vw, 18px)",fontSize:"clamp(12px, 1.5vw, 14px)",fontFamily:'"Work Sans", sans-serif',borderRadius:0,color:"var(--bw-text)",backgroundColor:"var(--bw-bg)",border:"1px solid var(--bw-border)"}}),S&&e.jsx("img",{src:S,alt:"Logo Preview",style:{width:"clamp(60px, 8vw, 80px)",height:"clamp(60px, 8vw, 80px)",borderRadius:"4px",objectFit:"contain",border:"1px solid var(--bw-border)"}}),!S&&(i==null?void 0:i.logo_url)&&e.jsx("img",{src:i.logo_url,alt:"Current logo",style:{width:"clamp(60px, 8vw, 80px)",height:"clamp(60px, 8vw, 80px)",borderRadius:"4px",objectFit:"contain",border:"1px solid var(--bw-border)"}})]}),!t&&(i==null?void 0:i.logo_url)&&e.jsxs("span",{style:{fontSize:"clamp(11px, 1.3vw, 12px)",color:"var(--bw-muted)",fontFamily:'"Work Sans", sans-serif',fontWeight:300},children:["Current logo: ",i.logo_url]})]})]}),e.jsxs("div",{style:{marginTop:"clamp(24px, 4vw, 32px)",paddingTop:"clamp(24px, 4vw, 32px)",borderTop:"1px solid var(--bw-border)"},children:[e.jsxs("div",{style:{marginBottom:"clamp(12px, 2vw, 16px)"},children:[e.jsx("h4",{style:{margin:"0 0 4px 0",fontSize:"clamp(14px, 2vw, 16px)",fontFamily:'"Work Sans", sans-serif',fontWeight:400,color:"var(--bw-text)"},children:"Favicon"}),e.jsx("span",{style:{fontSize:"clamp(10px, 1.2vw, 11px)",fontFamily:'"Work Sans", sans-serif',fontWeight:300,color:"var(--bw-muted)",opacity:.7,display:"block",lineHeight:1.3},children:"Upload your favicon icon to display in browser tabs (recommended: 32x32 or 16x16 pixels)"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"clamp(12px, 2vw, 16px)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"clamp(12px, 2vw, 16px)",flexWrap:"wrap"},children:[e.jsx("input",{type:"file",accept:"image/*",onChange:U,className:"bw-input",style:{flex:1,minWidth:o?"100%":"200px",padding:"clamp(12px, 2vw, 16px) clamp(14px, 2.5vw, 18px)",fontSize:"clamp(12px, 1.5vw, 14px)",fontFamily:'"Work Sans", sans-serif',borderRadius:0,color:"var(--bw-text)",backgroundColor:"var(--bw-bg)",border:"1px solid var(--bw-border)"}}),F&&e.jsx("img",{src:F,alt:"Favicon Preview",style:{width:"clamp(32px, 5vw, 48px)",height:"clamp(32px, 5vw, 48px)",borderRadius:"4px",objectFit:"contain",border:"1px solid var(--bw-border)"}}),!F&&(i==null?void 0:i.favicon_url)&&e.jsx("img",{src:i.favicon_url,alt:"Current favicon",style:{width:"clamp(32px, 5vw, 48px)",height:"clamp(32px, 5vw, 48px)",borderRadius:"4px",objectFit:"contain",border:"1px solid var(--bw-border)"}})]}),!p&&(i==null?void 0:i.favicon_url)&&e.jsxs("span",{style:{fontSize:"clamp(11px, 1.3vw, 12px)",color:"var(--bw-muted)",fontFamily:'"Work Sans", sans-serif',fontWeight:300},children:["Current favicon: ",i.favicon_url]})]})]}),(t||p)&&e.jsx("div",{style:{marginTop:"clamp(16px, 2.5vw, 20px)"},children:e.jsx("button",{className:"bw-btn bw-btn-action",onClick:P,disabled:w,style:{padding:"clamp(12px, 2vw, 16px) clamp(20px, 4vw, 24px)",fontSize:"clamp(14px, 2vw, 16px)",fontFamily:'"Work Sans", sans-serif',fontWeight:600,borderRadius:7,backgroundColor:"var(--bw-accent)",color:"#ffffff",border:"none",cursor:w?"not-allowed":"pointer",opacity:w?.6:1},children:w?"Uploading...":`Upload ${t&&p?"Logo & Favicon":t?"Logo":"Favicon"}`})})]})})]})]})}export{re as default};
