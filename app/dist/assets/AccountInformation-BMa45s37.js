import{r,j as a,i as D,X as T,an as U,o as $,al as X}from"./react-vendor-JE9gdlBQ.js";import{f as F,x as O,G as q}from"./index-DaAC2zqA.js";import{U as G}from"./UpgradePlanButton-C63cPaCY.js";import{u as V,S as Y}from"./SettingsMenuBar-Cp_MNEJw.js";import{b as J}from"./router-DL0rZlEF.js";import"./vendor-C1Py2TwH.js";import"./utils-2shQNo7D.js";function re(){var W,k;const[e,w]=r.useState(null),[z,E]=r.useState(!0),[u,v]=r.useState(!1),[x,g]=r.useState(!1),[t,L]=r.useState(window.innerWidth<=768),{isOpen:h}=V(),[o,y]=r.useState(!1),[i,S]=r.useState(!1),[p,j]=r.useState(!1),[d,_]=r.useState(!1),[c,C]=r.useState(!1),M=J(),[f,b]=r.useState({first_name:"",last_name:"",email:"",phone_no:""});r.useEffect(()=>{const s=()=>{L(window.innerWidth<=768)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),r.useEffect(()=>{(async()=>{var l,m,I,N;try{const n=await F();w(n.data),b({first_name:((l=n.data)==null?void 0:l.first_name)||"",last_name:((m=n.data)==null?void 0:m.last_name)||"",email:((I=n.data)==null?void 0:I.email)||"",phone_no:((N=n.data)==null?void 0:N.phone_no)||""})}catch(n){console.error("Failed to load data:",n)}finally{E(!1)}})()},[]);const A=(s,l)=>{b(m=>({...m,[s]:l}))},H=async()=>{try{g(!0),await O.patch("/v1/tenant/",f);const s=await F();w(s.data),v(!1),alert("Account information updated successfully!")}catch(s){console.error("Failed to update:",s),alert("Failed to update account information. Please try again.")}finally{g(!1)}},B=()=>{b({first_name:(e==null?void 0:e.first_name)||"",last_name:(e==null?void 0:e.last_name)||"",email:(e==null?void 0:e.email)||"",phone_no:(e==null?void 0:e.phone_no)||""}),v(!1)},P=async()=>{try{_(!0);const s=await q();s!=null&&s.onboarding_link?window.open(s.onboarding_link,"_blank","noopener,noreferrer"):alert("Failed to get onboarding link. Please try again.")}catch(s){console.error("Failed to setup Stripe account:",s),alert("Failed to setup Stripe account. Please try again.")}finally{_(!1)}};if(z)return a.jsx("div",{className:"bw bw-container",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",padding:"clamp(16px, 3vw, 24px) 0"},children:a.jsx("div",{className:"bw-loading",style:{fontSize:"clamp(14px, 2vw, 16px)",fontFamily:'"Work Sans", sans-serif',color:"var(--bw-muted)"},children:"Loading..."})});const R=((k=(W=e==null?void 0:e.profile)==null?void 0:W.subscription_plan)==null?void 0:k.toLowerCase())||"free";return a.jsxs("div",{className:"bw",style:{display:"flex",minHeight:"100vh"},children:[a.jsx(Y,{}),a.jsxs("div",{style:{marginLeft:t?"0":h?"20%":"64px",transition:"margin-left 0.3s ease",width:t?"100%":h?"calc(100% - 20%)":"calc(100% - 64px)",maxWidth:"100%",overflowX:"hidden",boxSizing:"border-box"},children:[a.jsx("div",{style:{width:"100%",maxWidth:"100%",padding:"clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px)",marginBottom:"clamp(24px, 4vw, 32px)",boxSizing:"border-box"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:t?"wrap":"nowrap",gap:"clamp(12px, 2vw, 16px)"},children:[a.jsx("h1",{style:{fontSize:"clamp(24px, 4vw, 32px)",margin:0,fontFamily:'"DM Sans", sans-serif',fontWeight:200,color:"var(--bw-text)"},children:"Account Information"}),u?a.jsxs("div",{style:{display:"flex",gap:"clamp(8px, 1.5vw, 12px)",flexWrap:"wrap"},children:[a.jsxs("button",{className:`bw-btn-outline ${p?"custom-hover-border":""}`,onClick:B,onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),disabled:x,style:{padding:t?"clamp(14px, 2.5vw, 18px) clamp(20px, 4vw, 24px)":"14px 24px",fontSize:t?"clamp(14px, 2vw, 16px)":"14px",fontFamily:'"Work Sans", sans-serif',fontWeight:600,display:"flex",alignItems:"center",gap:t?"clamp(8px, 1.5vw, 10px)":"8px",borderRadius:7,border:p?"2px solid rgba(155, 97, 209, 0.81)":void 0,borderColor:p?"rgba(155, 97, 209, 0.81)":void 0,color:p?"rgba(155, 97, 209, 0.81)":"#000000",backgroundColor:p?"var(--bw-bg-secondary)":"#ffffff",transition:"all 0.2s ease"},children:[a.jsx(T,{className:"w-4 h-4",style:{width:t?"clamp(18px, 2.5vw, 20px)":"18px",height:t?"clamp(18px, 2.5vw, 20px)":"18px"}}),a.jsx("span",{children:"Cancel"})]}),a.jsxs("button",{className:`bw-btn bw-btn-action ${i?"custom-hover-border":""}`,onClick:H,onMouseEnter:()=>!x&&S(!0),onMouseLeave:()=>S(!1),disabled:x,style:{padding:t?"clamp(14px, 2.5vw, 18px) clamp(20px, 4vw, 24px)":"14px 24px",fontSize:t?"clamp(14px, 2vw, 16px)":"14px",fontFamily:'"Work Sans", sans-serif',fontWeight:600,display:"flex",alignItems:"center",gap:t?"clamp(8px, 1.5vw, 10px)":"8px",borderRadius:7,backgroundColor:i?"var(--bw-bg-secondary)":"var(--bw-accent)",color:i?"rgba(155, 97, 209, 0.81)":"#ffffff",border:i?"2px solid rgba(155, 97, 209, 0.81)":"none",borderColor:i?"rgba(155, 97, 209, 0.81)":void 0,transition:"all 0.2s ease"},children:[a.jsx(U,{className:"w-4 h-4",style:{width:t?"clamp(18px, 2.5vw, 20px)":"18px",height:t?"clamp(18px, 2.5vw, 20px)":"18px"}}),a.jsx("span",{children:x?"Saving...":"Save"})]})]}):a.jsxs("button",{className:`bw-btn-outline ${o?"custom-hover-border":""}`,onClick:()=>v(!0),onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),style:{padding:t?"clamp(14px, 2.5vw, 18px) clamp(20px, 4vw, 24px)":"14px 24px",fontSize:t?"clamp(14px, 2vw, 16px)":"14px",fontFamily:'"Work Sans", sans-serif',fontWeight:600,display:"flex",alignItems:"center",gap:t?"clamp(8px, 1.5vw, 10px)":"8px",borderRadius:7,border:o?"2px solid rgba(155, 97, 209, 0.81)":void 0,borderColor:o?"rgba(155, 97, 209, 0.81)":void 0,color:o?"rgba(155, 97, 209, 0.81)":"#000000",backgroundColor:o?"var(--bw-bg-secondary)":"#ffffff",transition:"all 0.2s ease"},children:[a.jsx(D,{className:"w-4 h-4",style:{width:t?"clamp(18px, 2.5vw, 20px)":"18px",height:t?"clamp(18px, 2.5vw, 20px)":"18px"}}),a.jsx("span",{children:"Edit"})]})]})}),a.jsx("div",{className:"bw-container",style:{padding:"0 clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px) clamp(16px, 2vw, 24px)",maxWidth:"100%",overflowX:"hidden",boxSizing:"border-box"},children:a.jsxs("div",{className:"bw-card",style:{backgroundColor:"var(--bw-bg-secondary)",border:"1px solid var(--bw-border)",borderRadius:"clamp(8px, 1.5vw, 12px)",padding:"clamp(16px, 2.5vw, 24px)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"clamp(8px, 1.5vw, 12px)",marginBottom:"clamp(16px, 2.5vw, 24px)"},children:[a.jsx($,{className:"w-5 h-5",style:{color:"var(--bw-text)"}}),a.jsx("h3",{style:{margin:0,fontSize:"clamp(16px, 2.5vw, 20px)",fontFamily:'"Work Sans", sans-serif',fontWeight:400,color:"var(--bw-text)"},children:"Personal Information"})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:t?"1fr":"repeat(2, minmax(0, 1fr))",gap:"clamp(16px, 2vw, 24px)",width:"100%",maxWidth:"100%"},children:[{label:"First Name",field:"first_name",type:"text"},{label:"Last Name",field:"last_name",type:"text"},{label:"Email",field:"email",type:"email"},{label:"Phone",field:"phone_no",type:"tel"},{label:"Account Verified",field:"is_verified",type:"display",value:e!=null&&e.is_verified?"Yes":"No"}].map(s=>a.jsxs("div",{className:"bw-form-group",children:[a.jsx("label",{className:"bw-form-label small-muted",style:{fontSize:"clamp(11px, 1.3vw, 13px)",fontFamily:'"Work Sans", sans-serif',fontWeight:300,color:"var(--bw-muted)",marginBottom:"clamp(4px, 0.8vw, 6px)"},children:s.label}),s.type==="display"?a.jsx("div",{style:{fontSize:"clamp(12px, 1.5vw, 14px)",fontFamily:'"Work Sans", sans-serif',fontWeight:300,color:"var(--bw-text)",padding:"clamp(12px, 2vw, 16px) 0"},children:s.value||"N/A"}):u?a.jsx("input",{type:s.type,value:f[s.field],onChange:l=>A(s.field,l.target.value),className:"bw-input",style:{width:"100%",padding:"clamp(12px, 2vw, 16px) clamp(14px, 2.5vw, 18px)",fontSize:"clamp(12px, 1.5vw, 14px)",fontFamily:'"Work Sans", sans-serif',borderRadius:0,color:"var(--bw-text)",backgroundColor:"var(--bw-bg)",border:"1px solid var(--bw-border)"}}):a.jsx("div",{style:{fontSize:"clamp(12px, 1.5vw, 14px)",fontFamily:'"Work Sans", sans-serif',fontWeight:300,color:"var(--bw-text)",padding:"clamp(12px, 2vw, 16px) 0"},children:f[s.field]||"N/A"})]},s.field))}),a.jsxs("div",{id:"complete-account-setup",style:{marginTop:"clamp(24px, 4vw, 32px)",paddingTop:"clamp(24px, 4vw, 32px)",borderTop:"1px solid var(--bw-border)"},children:[a.jsxs("div",{style:{marginBottom:"clamp(12px, 2vw, 16px)"},children:[a.jsx("h4",{style:{margin:"0 0 4px 0",fontSize:"clamp(14px, 2vw, 16px)",fontFamily:'"Work Sans", sans-serif',fontWeight:400,color:"var(--bw-text)"},children:"Complete Account Setup"}),a.jsx("span",{style:{fontSize:"clamp(10px, 1.2vw, 11px)",fontFamily:'"Work Sans", sans-serif',fontWeight:300,color:"var(--bw-muted)",opacity:.7,display:"block",lineHeight:1.3},children:"Complete your Stripe account setup to enable payment processing"})]}),a.jsxs("button",{className:`bw-btn bw-btn-action ${c&&!(e!=null&&e.is_verified)?"custom-hover-border":""}`,onClick:P,onMouseEnter:()=>!d&&!(e!=null&&e.is_verified)&&C(!0),onMouseLeave:()=>C(!1),disabled:d||(e==null?void 0:e.is_verified),style:{padding:t?"clamp(14px, 2.5vw, 18px) clamp(20px, 4vw, 24px)":"14px 24px",fontSize:t?"clamp(14px, 2vw, 16px)":"14px",fontFamily:'"Work Sans", sans-serif',fontWeight:600,display:"flex",alignItems:"center",gap:t?"clamp(8px, 1.5vw, 10px)":"8px",borderRadius:7,backgroundColor:e!=null&&e.is_verified||c?"var(--bw-bg-secondary)":"var(--bw-accent)",color:e!=null&&e.is_verified?"var(--bw-muted)":c?"rgba(155, 97, 209, 0.81)":"#ffffff",border:e!=null&&e.is_verified?"1px solid var(--bw-border)":c?"2px solid rgba(155, 97, 209, 0.81)":"none",borderColor:e!=null&&e.is_verified?"var(--bw-border)":c?"rgba(155, 97, 209, 0.81)":void 0,transition:"all 0.2s ease",cursor:d||e!=null&&e.is_verified?"not-allowed":"pointer",opacity:d||e!=null&&e.is_verified?.6:1},children:[a.jsx(X,{className:"w-4 h-4",style:{width:t?"clamp(18px, 2.5vw, 20px)":"18px",height:t?"clamp(18px, 2.5vw, 20px)":"18px",opacity:e!=null&&e.is_verified?.5:1}}),a.jsx("span",{children:d?"Setting up...":e!=null&&e.is_verified?"Account Setup Complete":"Complete Account Setup"})]})]})]})}),a.jsx(G,{currentPlan:R,onUpgradeClick:()=>M("/tenant/settings/plans"),isMobile:t})]})]})}export{re as default};
